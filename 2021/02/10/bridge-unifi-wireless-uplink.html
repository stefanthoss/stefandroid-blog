<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Bridge UniFi Switches with Wireless Uplink | Stefandroid Blog</title>
<meta name="generator" content="Jekyll v4.3.4" />
<meta property="og:title" content="Bridge UniFi Switches with Wireless Uplink" />
<meta name="author" content="Stefan Thoss" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="UniFi’s wireless uplink feature can be used to bridge two wired switches with a Wi-Fi connection." />
<meta property="og:description" content="UniFi’s wireless uplink feature can be used to bridge two wired switches with a Wi-Fi connection." />
<link rel="canonical" href="https://blog.stefandroid.com/2021/02/10/bridge-unifi-wireless-uplink.html" />
<meta property="og:url" content="https://blog.stefandroid.com/2021/02/10/bridge-unifi-wireless-uplink.html" />
<meta property="og:site_name" content="Stefandroid Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-02-10T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Bridge UniFi Switches with Wireless Uplink" />
<meta name="google-site-verification" content="IfD8jtnHx4mJpYOmj73jbGqeMSrR8K9C5AIUW6p0Uzs" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Stefan Thoss"},"dateModified":"2024-12-07T05:28:15+00:00","datePublished":"2021-02-10T00:00:00+00:00","description":"UniFi’s wireless uplink feature can be used to bridge two wired switches with a Wi-Fi connection.","headline":"Bridge UniFi Switches with Wireless Uplink","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.stefandroid.com/2021/02/10/bridge-unifi-wireless-uplink.html"},"url":"https://blog.stefandroid.com/2021/02/10/bridge-unifi-wireless-uplink.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://blog.stefandroid.com/feed.xml" title="Stefandroid Blog" /><meta http-equiv="Content-Security-Policy" content="base-uri 'self'; default-src 'self' 'unsafe-inline' *.stefandroid.com;" />
  <script async defer data-domain="blog.stefandroid.com" src="https://stats.stefandroid.com/js/plausible.js" data-exclude="/last-comments"></script>
</head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Stefandroid Blog</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Bridge UniFi Switches with Wireless Uplink</h1>
    <p class="post-meta"><time class="dt-published" datetime="2021-02-10T00:00:00+00:00" itemprop="datePublished">
        Feb 10, 2021
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>You can use UniFi networking gear to bridge two areas of wired networking with a wireless connection. This is a good
solution if you live in a home where you can’t run wires between rooms. The setup is relatively straight-forward and I
was able to achieve throughputs of 360 to 460 Mbit/s for both upload and download. This is far from wired throughput
but still pretty good for a lot of use cases.</p>

<h2 id="setup">Setup</h2>

<p>I have two UniFi switches that each have an access point connected:</p>

<p><img src="/assets/images/wireless-unifi-bridge.png" alt="Wireless Uplink Bridge with UniFi" /></p>

<p>I’m using</p>

<ul>
  <li>a UniFi Switch 16 PoE and a UniFi Switch Lite 16 PoE,</li>
  <li>a UniFi FlexHD and a UniFi nanoHD, and</li>
  <li>a UniFi Controller 6.0.</li>
</ul>

<p>This should work with any other currently supported UniFi networking gear. Ubiquiti has a good guide that explains how
to <a href="https://help.ui.com/hc/en-us/articles/115002262328-UniFi-Configuring-a-Wireless-Uplink">configure a wireless uplink</a>.
The guide explains this with the example of building a wireless mesh network. It does not explicitly mention that you
can connect additional switches and devices to the Ethernet port of the uplinked access point but this definitely works.</p>

<p><em>Note</em>: For this to work, make sure that the “Enable wireless uplink” setting under “Services” in the “Site” section of
the UniFi controller is enabled. Additionally, the “Enable Meshing” option in the “Radios” section of each access point
should be enabled as well.</p>

<p>To start the setup, move one of the switch and access point pair to the location of
the other switch and connect the two switches with a wired Ethernet connection. Make sure that all devices are adopted
in the UniFi Controller. Then disconnect the cable between the switches. After some time, the access point with the
wireless uplink should reconnect and be listed as <em>Connected|Wireless</em> in the UniFi Controller:</p>

<p><img src="/assets/images/unifi-devices-wireless-connected.png" alt="Wireless Uplink in UniFi Controller" /></p>

<h2 id="throughput">Throughput</h2>

<p>I’m using <a href="https://iperf.fr/">iPerf3</a> to measure network throughput. For the tests I chose 30 seconds as the test
duration and 4 parallel client streams since my server has 4 cores and I want to maximize throughput. I tested the
throughput in two scenarios, one with a single wall between the two access points and one with more obstructions.</p>

<p>I’m testing with the following two devices:</p>

<ul>
  <li>Server: pfSense 2.4.5 router with iPerf 3.7 (IP 192.168.1.1)</li>
  <li>Client: Debian 10 server with iPerf 3.6</li>
</ul>

<h2 id="one-wall">One Wall</h2>

<p>In the first scenario the two access points are roughly 40 ft / 12 m apart, on the same floor, and separated by one
interior (wood frame) wall. The throughput is roughly 460 Mbit/s for both upload and download. That is roughly half of
what a wired Gigabit connection provides but still enough for most home networking use cases and the average residential
Internet connection. You probably don’t want to use this to connect your homelab servers to each other but as a
connection to your modem it should be sufficient.</p>

<h3 id="one-wall---client-upload-speed">One Wall - Client Upload Speed</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>iperf3 <span class="nt">-c</span> 192.168.1.1 <span class="nt">-f</span> m <span class="nt">-P</span> 4 <span class="nt">-t</span> 30
</code></pre></div></div>

<p>Result:</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[ ID] Interval           Transfer     Bitrate         Retr
[SUM]   0.00-30.00  sec  1.62 GBytes   463 Mbits/sec    3             sender
[SUM]   0.00-30.02  sec  1.61 GBytes   460 Mbits/sec                  receiver
</code></pre></div></div>

<h3 id="one-wall---client-download-speed">One Wall - Client Download Speed</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>iperf3 <span class="nt">-c</span> 192.168.1.1 <span class="nt">-f</span> m <span class="nt">-P</span> 4 <span class="nt">-t</span> 30 <span class="nt">-R</span>
</code></pre></div></div>

<p>Result:</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[ ID] Interval           Transfer     Bitrate         Retr
[SUM]   0.00-30.01  sec  1.60 GBytes   457 Mbits/sec  754             sender
[SUM]   0.00-30.00  sec  1.59 GBytes   456 Mbits/sec                  receiver
</code></pre></div></div>

<h2 id="more-obstruction">More Obstruction</h2>

<p>In the second scenario the two access points are roughly 30 ft / 9 m apart, on the same floor, and separated by 3
interior (wood frame) walls and a staircase. The throughput drops by roughly 20% to 365 Mbit/s. As expected,
obstructions like walls have major impact on the throughput. If you can arrange the access points in a way to minimize
the number of walls in between, your throughput will likely benefit from it. I assume that multiple floors or concrete
walls have an even greater impact on the throughput.</p>

<h3 id="more-obstruction---client-upload-speed">More Obstruction - Client Upload Speed</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>iperf3 <span class="nt">-c</span> 192.168.1.1 <span class="nt">-f</span> m <span class="nt">-P</span> 4 <span class="nt">-t</span> 30
</code></pre></div></div>

<p>Result:</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[ ID] Interval           Transfer     Bitrate         Retr
[SUM]   0.00-30.00  sec  1.29 GBytes   369 Mbits/sec    0             sender
[SUM]   0.00-30.02  sec  1.28 GBytes   367 Mbits/sec                  receiver
</code></pre></div></div>

<h3 id="more-obstruction---client-download-speed">More Obstruction - Client Download Speed</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>iperf3 <span class="nt">-c</span> 192.168.1.1 <span class="nt">-f</span> m <span class="nt">-P</span> 4 <span class="nt">-t</span> 30 <span class="nt">-R</span>
</code></pre></div></div>

<p>Result:</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[ ID] Interval           Transfer     Bitrate         Retr
[SUM]   0.00-30.01  sec  1.26 GBytes   361 Mbits/sec  4026             sender
[SUM]   0.00-30.00  sec  1.26 GBytes   360 Mbits/sec                  receiver
</code></pre></div></div>

  </div>

  <div id="remark42"></div>

  <a class="u-url" href="/2021/02/10/bridge-unifi-wireless-uplink.html" hidden></a>
</article>

<script>
  var remark_config = {
    host: 'https://remark.stefandroid.com',
    site_id: 'STEFANDROID_BLOG',
    components: ['embed'],
    url: 'https://blog.stefandroid.com/2021/02/10/bridge-unifi-wireless-uplink.html',
    theme: 'light',
    locale: 'en',
    show_email_subscription: false
  };
</script>
<script>!function(e,n){for(var o=0;o<e.length;o++){var r=n.createElement("script"),c=".js",d=n.head||n.body;"noModule"in r?(r.type="module",c=".mjs"):r.async=!0,r.defer=!0,r.src=remark_config.host+"/web/"+e[o]+c,d.appendChild(r)}}(remark_config.components||["embed"],document);</script>

      </div>
    </main><footer class="site-footer h-card">

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <ul class="contact-list">
          
        </ul>
      </div>
    </div>

    <div class="social-links">
      <ul class="social-media-list"><li><a href="https://github.com/stefanthoss" target="_blank"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">stefanthoss</span></a></li><li><a rel="me" href="https://sfba.social/@stefandroid" target="_blank"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#mastodon"></use></svg> <span>Mastodon</span></a></li><li><a href="/feed.xml"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#rss"></use></svg> <span>Subscribe via Atom</span></a></li></ul>      
    </div>

  </div>

</footer>
</body>

</html>
